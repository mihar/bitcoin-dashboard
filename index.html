<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://socketio.mtgox.com/socket.io/socket.io.js"></script>
    <script type="text/javascript">
      /* Simple JavaScript Inheritance
       * By John Resig http://ejohn.org/
       * MIT Licensed.
       */
      // Inspired by base2 and Prototype
      (function(){
        var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;
       
        // The base Class implementation (does nothing)
        this.Class = function(){};
       
        // Create a new Class that inherits from this class
        Class.extend = function(prop) {
          var _super = this.prototype;
         
          // Instantiate a base class (but only create the instance,
          // don't run the init constructor)
          initializing = true;
          var prototype = new this();
          initializing = false;
         
          // Copy the properties over onto the new prototype
          for (var name in prop) {
            // Check if we're overwriting an existing function
            prototype[name] = typeof prop[name] == "function" &&
              typeof _super[name] == "function" && fnTest.test(prop[name]) ?
              (function(name, fn){
                return function() {
                  var tmp = this._super;
                 
                  // Add a new ._super() method that is the same method
                  // but on the super-class
                  this._super = _super[name];
                 
                  // The method only need to be bound temporarily, so we
                  // remove it when we're done executing
                  var ret = fn.apply(this, arguments);
                  this._super = tmp;
                 
                  return ret;
                };
              })(name, prop[name]) :
              prop[name];
          }
         
          // The dummy class constructor
          function Class() {
            // All construction is actually done in the init method
            if ( !initializing && this.init )
              this.init.apply(this, arguments);
          }
         
          // Populate our constructed prototype object
          Class.prototype = prototype;
         
          // Enforce the constructor to be what we expect
          Class.prototype.constructor = Class;
       
          // And make this class extendable
          Class.extend = arguments.callee;
         
          return Class;
        };
      })();
    </script>
    <script>
      var BTCD = {};
      window.BTCD = BTCD;

      BTCD.exchange = Class.extend({
        init: function() {

        }
      });

      BTCD.exchange_poll = BTCD.exchange.extend({
        polling_interval: 5000,

        init: function() {
          if ( this.poll_url ) this.poll();
        },

        poll: function() {
          this_obj = this;
          this.poll_timeout = setTimeout(function() { this_obj.poll(); }, this.polling_interval);
          console.log('poll', this);
          $.get(this.poll_url, this.process_data);
        }
      });

      BTCD.exchange_socket = BTCD.exchange.extend({
        init: function() {
          if ( this.socket_url ) this.connect();
        },

        connect: function() {
          this.connection = io.connect(this.socket_url);
          this.connection.on('message', this.process_message);
        }
      });

      // Individual exchanges.
      BTCD.exchanges = {};

      BTCD.exchanges.MtGox = BTCD.exchange_socket.extend({
        socket_url: 'https://socketio.mtgox.com/mtgox',

        process_message: function(data) {
          if ( data && data.ticker ) {
            console.log(data.ticker);
          }
        }
      });

      BTCD.exchanges.Coinbase = BTCD.exchange_poll.extend({
        poll_url: 'https://coinbase.com/api/v1/prices/sell',

        process_data: function(data) {
          console.log(data);
        }
      })

      BTCD.exchanges.Bitstamp = BTCD.exchange_poll.extend({
        poll_url: 'https://www.bitstamp.net/api/ticker/',

        process_data: function(data) {
          console.log(data);
        }
      })
    </script>
  </head>
  <body>
    <script type="text/javascript">
      new BTCD.exchanges.Bitstamp();
    </script>
  </body>
</html>


https://btc-e.com/api/2/14/ticker